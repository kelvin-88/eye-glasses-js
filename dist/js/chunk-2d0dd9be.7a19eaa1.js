(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd9be"],{"81b1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"container-fluid px-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10 col-md-4 col-lg-2 mx-auto my-3 px-4 text-capitalize"},[a("span",{staticClass:"h4",staticStyle:{"font-weight":"bold"}},[t._v("系列")]),t._l(t.materials,(function(e){return a("div",{key:e,staticClass:"item-category"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedMaterials,expression:"selectedMaterials"}],staticClass:"mt-3",attrs:{type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.selectedMaterials)?t._i(t.selectedMaterials,e)>-1:t.selectedMaterials},on:{change:function(a){var s=t.selectedMaterials,c=a.target,i=!!c.checked;if(Array.isArray(s)){var o=e,r=t._i(s,o);c.checked?r<0&&(t.selectedMaterials=s.concat([o])):r>-1&&(t.selectedMaterials=s.slice(0,r).concat(s.slice(r+1)))}else t.selectedMaterials=i}}}),a("label",{staticClass:"mx-2",attrs:{for:"material"}},[t._v(t._s(e))])])})),a("div",{staticClass:"row mt-5 px-2"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.priceRange,expression:"priceRange"}],staticClass:"form-control-range",attrs:{min:"1",max:"10000",type:"range",id:"price-range"},domProps:{value:t.priceRange},on:{change:t.filterProducts,__r:function(e){t.priceRange=e.target.value}}}),a("span",{staticClass:"h5"},[t._v("$"+t._s(t._f("toThousandSeperator")(t.priceRange)))])])],2),a("div",{staticClass:"col-10 col-md-8 col-lg-10 mx-auto my-3"},[a("div",{staticClass:"row"},t._l(t.tempProducts,(function(e){return a("div",{key:e.id,staticClass:"col-lg-4 col-sm-6 mt-3"},[a("Product",{attrs:{product:e,url:e.imageUrl[0]},on:{showProduct:t.showProduct,click:function(a){return t.getProduct(e)}}})],1)})),0)])])])],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"h5",attrs:{for:"price-range"}},[a("span",{staticClass:"h4",staticStyle:{"font-weight":"bold"}},[t._v("格價")]),t._v(" $1 - $10,000")])}],i=(a("99af"),a("caad"),a("2532"),a("b85c")),o=a("c1ac"),r={components:{Product:o["a"]},created:function(){console.log(this.$route.params),console.log(this.$route.query),this.getProducts(1)},data:function(){return{priceRange:1e4,isLoading:!1,title:"",products:[],tempProducts:[],tempProduct:{imageUrl:[]},tempIndex:0,user:{token:"",uuid:""},pages:{current_page:1,total_pages:0},materials:["經典系列","春夏眼鏡系列","行政眼鏡系列"],selectedMaterials:[],includeMaterials:[]}},watch:{selectedMaterials:{handler:function(){console.log(this.selectedMaterials),this.filterProducts()}}},methods:{setFavorites:function(t){var e=JSON.parse(localStorage.getItem("favorite"));console.log("setFavorites",e),null===e&&(e=[]);var a,s={},c=Object(i["a"])(t);try{for(c.s();!(a=c.n()).done;)s=a.value,e.includes(s.id)?s.favorite=!0:s.favorite=!1}catch(o){c.e(o)}finally{c.f()}console.log("setFavorites",t)},filterProducts:function(){var t;this.tempProducts=[],0===this.selectedMaterials.length?this.includeMaterials=this.materials:this.includeMaterials=this.selectedMaterials;var e,a=Object(i["a"])(this.products);try{for(a.s();!(e=a.n()).done;)t=e.value,console.log(t),this.includeMaterials.includes(t.title)&&t.price<=this.priceRange&&this.tempProducts.push(t)}catch(s){a.e(s)}finally{a.f()}},showProduct:function(t){console.log("showProduct received: ",t),this.$router.push({path:"/product/".concat(t)})},getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","api/").concat("92f42149-8598-4890-ac28-c09272379b59","/ec/products?page=").concat(e);this.$http.get(a).then((function(e){t.isLoading=!1,console.log(e.data.data),t.products=e.data.data,t.pages.current_page=e.data.meta.pagination.current_page,t.pages.total_pages=e.data.meta.pagination.total_pages,console.log(t.products),t.tempProducts=t.products,t.setFavorites(t.tempProducts)})).catch((function(e){t.isLoading=!1,console.log(e.response)}))},getProduct:function(t){console.log(t.id),this.$router.push({name:"product",params:{id:t.id}})}}},l=r,n=a("2877"),d=Object(n["a"])(l,s,c,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0dd9be.7a19eaa1.js.map