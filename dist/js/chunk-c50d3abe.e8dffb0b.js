(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c50d3abe"],{2355:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"row"},t._l(t.items,(function(a){return e("div",{key:a.id,staticClass:"col-lg-12 mt-3"},[e("Cart",{attrs:{item:a},on:{updateCart:t.updateCart,updating:t.updating,showProduct:t.showProduct,deleteCart:t.deleteCart}})],1)})),0),e("h2",{staticClass:"mt-4",staticStyle:{"text-align":"center!important"}},[t._v("暢銷產品")]),e("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleControls","data-ride":"carousel"}},[e("div",{staticClass:"carousel-inner"},t._l(t.tempProducts,(function(a){return e("div",{key:a.id,class:{"carousel-item":!0,active:t.firstTempProduct==a}},[e("Product",{attrs:{product:a,showShoppingCart:!1,url:a.imageUrl[0]},on:{showProduct:t.showProduct}})],1)})),0),t._m(0),t._m(1)]),e("div",{staticClass:"modal fade",attrs:{id:"delCartModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.product.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delProduct}},[t._v("確認刪除")])])])])])],1)},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleControls",role:"button","data-slide":"prev"}},[e("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"sr-only"},[t._v("Previous")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleControls",role:"button","data-slide":"next"}},[e("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"sr-only"},[t._v("Next")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("刪除產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],i=(e("99af"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("img",{staticClass:"card-img img-fluid",attrs:{src:t.item.product.imageUrl[0]},on:{click:function(a){return t.showProduct(t.item)}}})]),e("div",{staticClass:"col-1"},[e("p",{staticClass:"card-title"},[t._v(t._s(t.item.product.category))])]),e("div",{staticClass:"col-3"},[e("h4",{staticClass:"card-text"},[t._v(t._s(t.item.product.title))])]),e("div",{staticClass:"col-2"},[e("td",{staticClass:"align-middle"},[e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-group-prepend"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.quantityUpdata(t.item.product.id,t.item.quantity+1)}}},[t._v("+")])]),e("input",{staticClass:"form-control text-center",attrs:{id:"inlineFormInputGroupUsername",type:"text"},domProps:{value:t.item.quantity},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.quantityUpdata(t.item.product.id,a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:1===t.item.quantity},on:{click:function(a){return t.quantityUpdata(t.item.product.id,t.item.quantity-1)}}},[t._v("-")])]),e("button",{on:{click:function(a){return t.deleteCart(t.item)}}},[e("i",{staticClass:"fas fa-trash-alt"})])])])])])])}),n=[],c={props:{item:Object},data:function(){return{tempProduct:{product:{title:""}}}},methods:{showProduct:function(t){console.log("showProduct",t.product.id),this.$emit("showProduct",t.product.id)},deleteCart:function(t){this.$emit("deleteCart",t)},quantityUpdata:function(t,a){var e=this;if(this.$emit("updating",!0),!(a<=0)){this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/","api/").concat("92f42149-8598-4890-ac28-c09272379b59","/ec/shopping"),o={product:t,quantity:a};this.$http.patch(s,o).then((function(){e.isLoading=!1,e.$emit("updating",!1),e.$emit("updateCart")})).catch((function(t){e.isLoading=!1,e.$emit("updating",!1),console.log(t.response)}))}}}},r=c,d=(e("b588"),e("2877")),l=Object(d["a"])(r,i,n,!1,null,"1d175782",null),u=l.exports,p=e("e427"),m={components:{Cart:u,Product:p["a"]},created:function(){this.getShoppingCart(1),this.getProducts(1)},data:function(){return{isLoading:!1,title:"",items:[],tempProduct:{product:{title:""}},tempProducts:[],firstTempProduct:{},tempIndex:0,user:{token:"",uuid:""},pages:{current_page:1,total_pages:0}}},methods:{showProduct:function(t){console.log("showProduct received: ",t),this.$router.push({path:"/product/".concat(t)})},delProduct:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","api/").concat("92f42149-8598-4890-ac28-c09272379b59","/ec/shopping/").concat(this.tempProduct.product.id);this.$http.delete(a).then((function(){$("#delCartModal").modal("hide"),t.isLoading=!1,t.getShoppingCart(1),t.$bus.$emit("update-cart",(function(){}))})).catch((function(a){$("#delCartModal").modal("hide"),t.isLoading=!1,console.log(a.response)}))},deleteCart:function(t){console.log("deleteCart",t),$("#delCartModal").modal("show"),this.tempProduct=Object.assign({},t)},updating:function(t){this.isLoading=t},updateCart:function(t){this.getShoppingCart(1)},getShoppingCart:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$bus.$emit("update-cart",(function(){})),this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/","api/").concat("92f42149-8598-4890-ac28-c09272379b59","/ec/shopping?page=").concat(a);this.$http.get(e).then((function(a){t.isLoading=!1,console.log(a.data.data),t.items=a.data.data,t.pages.current_page=a.data.meta.pagination.current_page,t.pages.total_pages=a.data.meta.pagination.total_pages,console.log(t.items)})).catch((function(a){t.isLoading=!1,console.log(a.response)}))},getProducts:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/","api/").concat("92f42149-8598-4890-ac28-c09272379b59","/ec/products?page=").concat(a);this.$http.get(e).then((function(a){t.isLoading=!1,console.log(a.data.data),t.products=a.data.data,t.pages.current_page=a.data.meta.pagination.current_page,t.pages.total_pages=a.data.meta.pagination.total_pages,t.tempProducts=t.products,console.log("tempProducts",t.tempProducts),t.firstTempProduct={},t.tempProducts.length>0&&(t.firstTempProduct=t.tempProducts[0]);var e=0;for(e=0;e<t.tempProducts.length;e++)t.tempProducts[e].class=0===e?"carousel-item active":"carousel-item"})).catch((function(a){t.isLoading=!1,console.log(a.response)}))}}},h=m,g=(e("b44d"),Object(d["a"])(h,s,o,!1,null,"8b0595ba",null));a["default"]=g.exports},"2def":function(t,a,e){},b44d:function(t,a,e){"use strict";var s=e("bc7d"),o=e.n(s);o.a},b588:function(t,a,e){"use strict";var s=e("2def"),o=e.n(s);o.a},bc7d:function(t,a,e){}}]);
//# sourceMappingURL=chunk-c50d3abe.e8dffb0b.js.map