(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8429"],{"53b7":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("div",{staticClass:"wrap"},[o("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._m(0),o("hr"),t.tempProducts.length>0?o("div",{staticClass:"row"},t._l(t.tempProducts,(function(e){return o("div",{key:e.id,staticClass:"col-lg-4 col-sm-6 mt-3"},[o("Product",{attrs:{product:e,url:e.imageUrl[0]},on:{showProduct:t.showProduct,click:function(o){return t.getProduct(e)}}})],1)})),0):o("div",[o("h4",{staticClass:"mt-4"},[t._v("我的最愛目前是空的")])])],1)])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"h3 mt-4"},[o("strong",[t._v("我的最愛")])])}],c=(o("99af"),o("caad"),o("2532"),o("b85c")),r=o("c1ac"),i={components:{Product:r["a"]},created:function(){console.log(this.$route.params),console.log(this.$route.query),this.getProducts(1)},data:function(){return{isLoading:!1,title:"",products:[],tempProducts:[],tempProduct:{imageUrl:[]},tempIndex:0,user:{token:"",uuid:""},pages:{current_page:1,total_pages:0}}},watch:{selectedMaterials:{handler:function(){console.log(this.selectedMaterials),this.filterProducts()}}},methods:{setFavorites:function(t){var e=JSON.parse(localStorage.getItem("favorite"));console.log("setFavorites",e),null===e&&(e=[]);var o,a={},s=Object(c["a"])(t);try{for(s.s();!(o=s.n()).done;)a=o.value,e.includes(a.id)?a.favorite=!0:a.favorite=!1}catch(r){s.e(r)}finally{s.f()}console.log("setFavorites",t)},filterProducts:function(){var t;this.tempProducts=[];var e,o=Object(c["a"])(this.products);try{for(o.s();!(e=o.n()).done;)t=e.value,console.log(t),this.selectedMaterials.includes(t.category)&&this.tempProducts.push(t)}catch(a){o.e(a)}finally{o.f()}},showProduct:function(t){console.log("showProduct received: ",t),this.$router.push({path:"/product/".concat(t)})},getFavorites:function(t){var e=JSON.parse(localStorage.getItem("favorite"));null===e&&(e=[]),this.tempProducts=[];var o,a={},s=Object(c["a"])(t);try{for(s.s();!(o=s.n()).done;)a=o.value,e.includes(a.id)&&this.tempProducts.push(a)}catch(r){s.e(r)}finally{s.f()}this.setFavorites(t)},getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var o="".concat("https://course-ec-api.hexschool.io/","api/").concat("92f42149-8598-4890-ac28-c09272379b59","/ec/products?page=").concat(e);this.$http.get(o).then((function(e){t.isLoading=!1,console.log(e.data.data),t.products=e.data.data,t.pages.current_page=e.data.meta.pagination.current_page,t.pages.total_pages=e.data.meta.pagination.total_pages,console.log(t.products),t.getFavorites(t.products)})).catch((function(e){t.isLoading=!1,console.log(e.response)}))},getProduct:function(t){console.log(t.id),this.$router.push({name:"product",params:{id:t.id}})}}},n=i,u=o("2877"),l=Object(u["a"])(n,a,s,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0c8429.d6fdf5dd.js.map